{"version":3,"file":"EbookDownload-CB_P_Mn0.js","sources":["../../../src/components/EbookDownload.tsx"],"sourcesContent":["import { useState, useRef, ReactNode, useEffect } from \"react\";\nimport { Modal, Button, Form, Image } from \"react-bootstrap\";\nimport ProfileImage from \"../assets/profile-image.webp\";\n\nconst EBOOK_DOWNLOAD_URL =\n  \"https://github.com/user-attachments/files/18716974/Mastering.DeepSeek_.Unleashing.Hidden.Features.Secret.Tricks.Powerful.Prompts.pdf\";\n\nconst GOOGLE_SCRIPT_URL =\n  \"https://script.google.com/macros/s/AKfycbzKz03CLv6V5lePGZpqOOj_Fp6-xP-sug01kXdbLncRuv_ayirbbWLRvB9jdmKA0e8zaA/exec\";\n\nconst EbookDownload = () => {\n  const [show, setShow] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [downloadReady, setDownloadReady] = useState(false);\n  const downloadLinkRef = useRef<HTMLAnchorElement>(null);\n  const [downloadTriggered, setDownloadTriggered] = useState(false);\n  const [isClient, setIsClient] = useState(false);\n\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!name || !email) return;\n\n    try {\n      setSubmitted(true);\n      setError(false);\n      setErrorMessage(\"\");\n\n      console.log(\"Submitting data to Google Sheets:\", { name, email });\n\n      const response = await fetch(GOOGLE_SCRIPT_URL, {\n        method: \"POST\",\n        mode: \"no-cors\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ name, email }),\n      });\n\n      console.log(\"Google Script Response:\", response);\n\n      setDownloadReady(true);\n      setSubmitted(false);\n    } catch (err) {\n      const error = err as Error;\n      console.error(\"Error submitting data:\", error);\n      setError(true);\n      setErrorMessage(\n        error.message || \"An unexpected error occurred. Please try again.\"\n      );\n      setSubmitted(false);\n    }\n  };\n\n  const triggerDownload = () => {\n    if (downloadLinkRef.current) {\n      downloadLinkRef.current.click();\n      setDownloadTriggered(true);\n    }\n  };\n\n  useEffect(() => {\n    if (downloadReady && !downloadTriggered) {\n      triggerDownload();\n    }\n  }, [downloadReady, downloadTriggered]);\n\n  let modalMessageContent: ReactNode = null;\n  if (error) {\n    modalMessageContent = (\n      <div className=\"modal-message text-danger\">\n        <p>Oops! Something went wrong.</p>\n        <p className=\"small\">{errorMessage}</p>\n      </div>\n    );\n  } else if (submitted) {\n    modalMessageContent = <div className=\"modal-message\">Loading...</div>;\n  } else if (downloadReady) {\n    modalMessageContent = (\n      <div className=\"modal-message text-success\">\n        <p>Thanks, {name}!</p>\n        <p className=\"small\">Your eBook is ready for download.</p>\n      </div>\n    );\n  }\n\n  if (!isClient) return null;\n\n  return (\n    <>\n      <Modal\n        show={show}\n        onHide={() => {\n          setShow(false);\n          setDownloadTriggered(false);\n          setDownloadReady(false);\n        }}\n        centered\n        dialogClassName=\"simple-modal\"\n        aria-labelledby=\"modal-title\"\n      >\n        <div className=\"position-absolute top-0 end-0 p-3\">\n          <Button\n            variant=\"link\"\n            className=\"modal-close-btn\"\n            onClick={() => {\n              setShow(false);\n              setDownloadTriggered(false);\n              setDownloadReady(false);\n            }}\n            aria-label=\"Close\"\n          >\n            âœ•\n          </Button>\n        </div>\n        <Modal.Header className=\"simple-modal-header\">\n          <div className=\"d-flex flex-column align-items-center w-100\">\n            <div className=\"d-flex align-items-center gap-3 mb-2\">\n              <Image\n                src={ProfileImage}\n                alt=\"Ai Trends Logo\"\n                height={32}\n                width={32}\n                className=\"modal-logo\"\n              />\n              <Modal.Title as=\"h5\" id=\"modal-title\" className=\"modal-title\">\n                Free eBook Download\n              </Modal.Title>\n            </div>\n            <p className=\"small text-muted text-center mb-0\">\n              Thank you for being here. Our love for tech brought us here!\n            </p>\n          </div>\n        </Modal.Header>\n        <Modal.Body className=\"simple-modal-body\">\n          {!submitted && !downloadReady && !error ? (\n            <Form onSubmit={handleSubmit} className=\"modal-form\">\n              <Form.Group controlId=\"name\" className=\"mb-3\">\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Full Name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  required\n                  className=\"modal-input\"\n                  aria-required=\"true\"\n                />\n              </Form.Group>\n              <Form.Group controlId=\"email\" className=\"mb-4\">\n                <Form.Control\n                  type=\"email\"\n                  placeholder=\"Email Address\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  required\n                  className=\"modal-input\"\n                  aria-required=\"true\"\n                  pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\"\n                  title=\"Please enter a valid email address\"\n                />\n              </Form.Group>\n              <Button\n                type=\"submit\"\n                className=\"modal-submit-btn\"\n                disabled={submitted}\n              >\n                {submitted ? \"Loading...\" : \"Get eBook\"}\n              </Button>\n            </Form>\n          ) : (\n            modalMessageContent\n          )}\n        </Modal.Body>\n      </Modal>\n      <a\n        href={EBOOK_DOWNLOAD_URL}\n        download=\"MasteringDeepSeek.pdf\"\n        style={{ display: \"none\" }}\n        ref={downloadLinkRef}\n      ></a>\n      <button\n        type=\"button\"\n        className=\"d-none\"\n        onClick={() => setShow(true)}\n        id=\"ebook-download-trigger\"\n      ></button>\n    </>\n  );\n};\n\nexport default EbookDownload;\n"],"names":["EbookDownload","show","setShow","useState","name","setName","email","setEmail","submitted","setSubmitted","error","setError","errorMessage","setErrorMessage","downloadReady","setDownloadReady","downloadLinkRef","useRef","downloadTriggered","setDownloadTriggered","isClient","setIsClient","useEffect","current","click","modalMessageContent","className","children","_jsx","_jsxs","_Fragment","Modal","onHide","centered","dialogClassName","Button","variant","onClick","Header","Image","src","ProfileImage","alt","height","width","Title","as","id","Body","Form","onSubmit","async","event","preventDefault","fetch","method","mode","headers","body","JSON","stringify","err","message","Group","controlId","Control","type","placeholder","value","onChange","e","target","required","pattern","title","disabled","href","download","style","display","ref"],"mappings":"6IAIA,MAMMA,EAAgBA,KACpB,MAAOC,EAAMC,GAAWC,EAAAA,UAAS,IAC1BC,EAAMC,GAAWF,EAAAA,SAAS,KAC1BG,EAAOC,GAAYJ,EAAAA,SAAS,KAC5BK,EAAWC,GAAgBN,EAAAA,UAAS,IACpCO,EAAOC,GAAYR,EAAAA,UAAS,IAC5BS,EAAcC,GAAmBV,EAAAA,SAAS,KAC1CW,EAAeC,GAAoBZ,EAAAA,UAAS,GAC7Ca,EAAkBC,SAA0B,OAC3CC,EAAmBC,GAAwBhB,EAAAA,UAAS,IACpDiB,EAAUC,GAAelB,EAAAA,UAAS,GAEzCmB,EAAAA,WAAU,KACRD,GAAY,EAAI,GACf,IA0CHC,EAAAA,WAAU,KACJR,IAAkBI,GAPlBF,EAAgBO,UAClBP,EAAgBO,QAAQC,QACxBL,GAAqB,GAML,GAEjB,CAACL,EAAeI,IAEnB,IAAIO,EAAiC,KAmBjC,OAlBAf,EACFe,IACE,MAAA,CAAKC,UAAU,4BAA2BC,UACxCC,EAAA,IAAA,CAAAD,SAAG,gCACHC,EAAA,IAAA,CAAGF,UAAU,QAAOC,SAAEf,OAGjBJ,EACTiB,IAAsB,MAAA,CAAKC,UAAU,gBAAeC,SAAC,eAC5Cb,IACTW,IACE,MAAA,CAAKC,UAAU,6BAA4BC,UACzCE,EAAA,IAAA,CAAAF,SAAG,CAAA,WAASvB,EAAK,OACjBwB,EAAA,IAAA,CAAGF,UAAU,QAAOC,SAAC,0CAKtBP,IAGHU,EAAA,CAAAH,SAAA,CACEE,EAACE,EAAK,CACJ9B,OACA+B,OAAQA,KACN9B,GAAQ,GACRiB,GAAqB,GACrBJ,GAAiB,EAAK,EAExBkB,UAAQ,EACRC,gBAAgB,eAChB,kBAAgB,cAAaP,UAE7BC,EAAA,MAAA,CAAKF,UAAU,oCAAmCC,WAC/CQ,EAAM,CACLC,QAAQ,OACRV,UAAU,kBACVW,QAASA,KACPnC,GAAQ,GACRiB,GAAqB,GACrBJ,GAAiB,EAAK,EAExB,aAAW,QAAOY,SACnB,QAIFI,EAAAA,EAAMO,OAAM,CAACZ,UAAU,sBAAqBC,WAC3C,MAAA,CAAKD,UAAU,8CAA6CC,UAC1DE,EAAA,MAAA,CAAKH,UAAU,uCAAsCC,SAAA,CACnDC,EAACW,EAAK,CACJC,IAAKC,EACLC,IAAI,iBACJC,OAAQ,GACRC,MAAO,GACPlB,UAAU,eAEXK,EAAAA,EAAMc,MAAK,CAACC,GAAG,KAAKC,GAAG,cAAcrB,UAAU,cAAaC,SAAC,2BAIhEC,EAAA,IAAA,CAAGF,UAAU,oCAAmCC,SAAC,sEAKpDI,EAAAA,EAAMiB,KAAI,CAACtB,UAAU,oBAAmBC,SACrCnB,GAAcM,GAAkBJ,EAmChCe,IAlCCwB,EAAI,CAACC,SAnHKC,MAAOC,IAEtB,GADJA,EAAMC,iBACDjD,GAASE,EAEV,IACFG,GAAa,GACbE,GAAS,GACTE,EAAgB,UAIOyC,MA7B3B,qHA6BoD,CAC9CC,OAAQ,OACRC,KAAM,UACNC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAExD,OAAME,YAK/BS,GAAiB,GACjBN,GAAa,SACNoD,GACP,MAAMnD,EAAQmD,EAEdlD,GAAS,GAEPD,EAAAA,EAAMoD,SAAW,mDAEnBrD,GAAa,EAAK,GAsFkBiB,UAAU,aAAYC,SAClDC,CAACqB,EAAAA,EAAKc,MAAK,CAACC,UAAU,OAAOtC,UAAU,OAAMC,SAC1CsB,EAAAA,EAAKgB,QAAO,CACXC,KAAK,OACLC,YAAY,YACZC,MAAOhE,EACPiE,SAAWC,GAAMjE,EAAQiE,EAAEC,OAAOH,OAClCI,UAAQ,EACR9C,UAAU,cACV,gBAAc,WAGjBuB,EAAAA,EAAKc,MAAK,CAACC,UAAU,QAAQtC,UAAU,OAAMC,SAC3CsB,EAAAA,EAAKgB,QAAO,CACXC,KAAK,QACLC,YAAY,gBACZC,MAAO9D,EACP+D,SAAWC,GAAM/D,EAAS+D,EAAEC,OAAOH,OACnCI,UAAQ,EACR9C,UAAU,cACV,gBAAc,OACd+C,QAAQ,0CACRC,MAAM,yCAGV9C,EAACO,EAAM,CACL+B,KAAK,SACLxC,UAAU,mBACViD,SAAUnE,EAAUmB,SAEnBnB,EAAY,aAAe,sBAQtCoB,EAAA,IAAA,CACEgD,KA/KN,uIAgLMC,SAAS,wBACTC,MAAO,CAAEC,QAAS,QAClBC,IAAKhE,IAEPY,EAAA,SAAA,CACEsC,KAAK,SACLxC,UAAU,SACVW,QAASA,IAAMnC,GAAQ,GACvB6C,GAAG,8BAlGa,IAoGlB"}